import { useState, useEffect } from 'react'

import Search from './components/Search'
import List from './components/List'
import restService from './services/restcountries.jsx'

const App = () => {
    const [countries, setCountries] = useState(null)
    const [list, setList] = useState([])
    const [query, setQuery] = useState('')

    const handleQuery = (event) => {
        setQuery(event.target.value)
        
        const newList = countries.filter(country => {
            country.name.common.includes(
                'Austria'
            )
        })

        console.log(newList)
    }

    useEffect(() => {
        restService
            .getAll()
            .then(response => {
                setCountries(response)
            })
    }, [])

    return (
        <>
            <Search query={query} handleQuery={handleQuery} />
            <List countries={list} />
        </>
    )
}

export default App
